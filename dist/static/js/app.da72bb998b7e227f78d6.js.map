{"version":3,"sources":["webpack:///static/js/app.da72bb998b7e227f78d6.js","webpack:///./src/main.js","webpack:///App.vue","webpack:///ImgCrop.vue","webpack:///./src/App.vue?d818","webpack:///./src/components/ImgCrop.vue?5a7b","webpack:///./src/App.vue","webpack:///./src/components/ImgCrop.vue"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","components","App","Object","defineProperty","value","_ImgCrop","_ImgCrop2","data","inImg","otImg","bgColor","isCroped","ImgCrop","methods","crop","this","$broadcast","events","img:out","iUri","canvasCr","ctxCr","bcr","img","window","Image","isMouseDownS","isMouseDownD","isMouseOverS","isMouseOverD","mouseDragCurX","mouseDragCurY","scale","cursor","props","canvasW","type","Number","canvasH","inImgSrc","String","backgroundColor","cropInitR","isRatio","Boolean","cropRatio","img:crop","outImg","$dispatch","w2cX","x","left","w2cY","y","top","imgJudge","imgR","width","height","canvasR","h","w","mouseDown","e","preventDefault","clientX","clientY","mouseMove","isDrag","isPointInPath","mouseDX","mouseDY","isBeyound","initCrop","curR","_isBeyound","mouseUp","mouseOver","_this","clearRect","beginPath","moveTo","lineTo","closePath","fillStyle","fill","strokeStyle","rect","stroke","arc","onmousedown","onmousemove","onmouseout","document","onmouseup","canvasOt","querySelector","ctxOt","getContext","drawImage","toDataURL","console","log","ready","_this2","$el","canvasIn","ctxIn","getBoundingClientRect","src","onload","__vue_script__","__vue_template__","options","template"],"mappings":"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","file":"static/js/app.da72bb998b7e227f78d6.js","sourcesContent":["webpackJsonp([1,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(9);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(7);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: 'body',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _ImgCrop = __webpack_require__(8);\n\t\n\tvar _ImgCrop2 = _interopRequireDefault(_ImgCrop);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      inImg: 'http://works.ccsph.com/uploadfiles/images/20130912/0912120535239613.jpg',\n\t      otImg: '',\n\t      bgColor: '#1a1a1a',\n\t      isCroped: false\n\t    };\n\t  },\n\t\n\t  components: {\n\t    ImgCrop: _ImgCrop2.default\n\t  },\n\t  methods: {\n\t    crop: function crop() {\n\t      if (!this.isCroped) {\n\t        this.$broadcast('img:crop');\n\t      }\n\t      this.isCroped = !this.isCroped;\n\t    }\n\t  },\n\t  events: {\n\t    'img:out': function imgOut(iUri) {\n\t      this.otImg = iUri;\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      canvasCr: null,\n\t      ctxCr: null,\n\t      bcr: null,\n\t      img: {},\n\t      crop: {},\n\t      inImg: new window.Image(),\n\t      isMouseDownS: false,\n\t      isMouseDownD: false,\n\t      isMouseOverS: false,\n\t      isMouseOverD: false,\n\t      mouseDragCurX: 0,\n\t      mouseDragCurY: 0,\n\t      scale: 1,\n\t      cursor: ''\n\t    };\n\t  },\n\t\n\t  props: {\n\t    canvasW: {\n\t      type: Number,\n\t      default: 360\n\t    },\n\t    canvasH: {\n\t      type: Number,\n\t      default: 360\n\t    },\n\t    inImgSrc: String,\n\t    backgroundColor: {\n\t      type: String,\n\t      default: '#000'\n\t    },\n\t    cropInitR: {\n\t      type: Number,\n\t      default: 1.5\n\t    },\n\t    isRatio: {\n\t      type: Boolean,\n\t      default: false\n\t    },\n\t    cropRatio: {\n\t      type: Number,\n\t      default: 1.6\n\t    }\n\t  },\n\t  events: {\n\t    'img:crop': function imgCrop() {\n\t      var iUri = this.outImg();\n\t      this.$dispatch('img:out', iUri);\n\t    }\n\t  },\n\t  methods: {\n\t    w2cX: function w2cX(x) {\n\t      return x - this.bcr.left;\n\t    },\n\t    w2cY: function w2cY(y) {\n\t      return y - this.bcr.top;\n\t    },\n\t    imgJudge: function imgJudge() {\n\t      var imgR = this.inImg.width / this.inImg.height;\n\t      var canvasR = this.canvasW / this.canvasH;\n\t      if (imgR >= canvasR) {\n\t        this.img.h = this.img.w / imgR;\n\t        this.img.y = (this.canvasH - this.img.h) / 2;\n\t      } else {\n\t        this.img.w = this.img.h * imgR;\n\t        this.img.x = (this.canvasW - this.img.w) / 2;\n\t      }\n\t      this.crop.w = this.img.w / this.cropInitR;\n\t      this.crop.h = this.crop.w / this.cropRatio;\n\t      this.crop.x = this.img.x + this.img.w / 2 - this.crop.w / 2;\n\t      this.crop.y = this.img.y + this.img.h / 2 - this.crop.h / 2;\n\t      this.scale = this.img.h / this.inImg.height;\n\t    },\n\t    mouseDown: function mouseDown(e) {\n\t      e.preventDefault();\n\t      if (this.isMouseOverD) {\n\t        this.isMouseDownD = true;\n\t        this.mouseDragCurX = this.w2cX(e.clientX);\n\t        this.mouseDragCurY = this.w2cX(e.clientY);\n\t      } else if (this.isMouseOverS) {\n\t        this.isMouseDownS = true;\n\t      }\n\t    },\n\t    mouseMove: function mouseMove(e) {\n\t      e.preventDefault();\n\t      if (!this.isMouseDownD && !this.isMouseDownS) {\n\t        var isDrag = this.w2cX(e.clientX) <= this.crop.x + this.crop.w && this.w2cX(e.clientX) >= this.crop.x && this.w2cY(e.clientY) <= this.crop.y + this.crop.h && this.w2cY(e.clientY) >= this.crop.y;\n\t        if (isDrag) {\n\t          this.cursor = 'move';\n\t          this.isMouseOverD = true;\n\t        } else if (this.ctxCr.isPointInPath(this.w2cX(e.clientX), this.w2cY(e.clientY))) {\n\t          this.cursor = 'nwse-resize';\n\t          this.isMouseOverS = true;\n\t        } else {\n\t          this.cursor = 'default';\n\t          this.isMouseOverD = false;\n\t          this.isMouseOverS = false;\n\t        }\n\t      }\n\t      if (this.isMouseDownD) {\n\t        var mouseDX = this.w2cX(e.clientX) - this.mouseDragCurX;\n\t        var mouseDY = this.w2cX(e.clientY) - this.mouseDragCurY;\n\t        var isBeyound = this.crop.x + mouseDX < this.img.x || this.crop.y + mouseDY < this.img.y || this.crop.x + mouseDX + this.crop.w > this.img.x + this.img.w || this.crop.y + mouseDY + this.crop.h > this.img.y + this.img.h;\n\t        if (!isBeyound) {\n\t          this.mouseDragCurX = this.w2cX(e.clientX);\n\t          this.mouseDragCurY = this.w2cX(e.clientY);\n\t          this.crop.x = this.crop.x + mouseDX;\n\t          this.crop.y = this.crop.y + mouseDY;\n\t          this.initCrop();\n\t        }\n\t      } else if (this.isMouseDownS) {\n\t        var curR = (this.w2cX(e.clientX) - this.crop.x) / (this.w2cY(e.clientY) - this.crop.y);\n\t        var _isBeyound = void 0;\n\t        if (!this.isRatio) {\n\t          _isBeyound = this.w2cX(e.clientX) < this.crop.x || this.w2cX(e.clientX) > this.img.x + this.img.w || this.w2cY(e.clientY) < this.crop.y || this.w2cY(e.clientY) > this.img.y + this.img.h;\n\t          if (!_isBeyound) {\n\t            this.crop.w = this.w2cX(e.clientX) - this.crop.x;\n\t            this.crop.h = this.w2cY(e.clientY) - this.crop.y;\n\t            this.initCrop();\n\t          }\n\t        } else {\n\t          if (curR >= this.cropRatio) {\n\t            _isBeyound = this.crop.x + (this.w2cY(e.clientY) - this.crop.y) * this.cropRatio < this.crop.x || this.crop.x + (this.w2cY(e.clientY) - this.crop.y) * this.cropRatio > this.img.x + this.img.w || this.w2cY(e.clientY) < this.crop.y || this.w2cY(e.clientY) > this.img.y + this.img.h;\n\t            if (!_isBeyound) {\n\t              this.crop.h = this.w2cY(e.clientY) - this.crop.y;\n\t              this.crop.w = this.crop.h * this.cropRatio;\n\t              this.initCrop();\n\t            }\n\t          } else {\n\t            _isBeyound = this.w2cX(e.clientX) < this.crop.x || this.w2cX(e.clientX) > this.img.x + this.img.w || this.crop.y + (this.w2cX(e.clientX) - this.crop.x) / this.cropRatio < this.crop.y || this.crop.y + (this.w2cX(e.clientX) - this.crop.x) / this.cropRatio > this.img.y + this.img.h;\n\t            if (!_isBeyound) {\n\t              this.crop.w = this.w2cX(e.clientX) - this.crop.x;\n\t              this.crop.h = this.crop.w / this.cropRatio;\n\t              this.initCrop();\n\t            }\n\t          }\n\t        }\n\t      }\n\t    },\n\t    mouseUp: function mouseUp(e) {\n\t      e.preventDefault();\n\t      if (this.isMouseDownD) {\n\t        this.isMouseDownD = false;\n\t      } else if (this.isMouseDownS) {\n\t        this.isMouseDownS = false;\n\t      }\n\t    },\n\t    mouseOver: function mouseOver(e) {\n\t      e.preventDefault();\n\t      var isDrag = this.w2cX(e.clientX) <= this.crop.x + this.crop.w && this.w2cX(e.clientX) >= this.crop.x && this.w2cY(e.clientY) <= this.crop.y + this.crop.h && this.w2cY(e.clientY) >= this.crop.y;\n\t      if (isDrag) {\n\t        this.cursor = 'move';\n\t      } else {\n\t        if (this.ctxCr.isPointInPath(this.w2cX(e.clientX), this.w2cY(e.clientY))) {\n\t          this.cursor = 'nwse-resize';\n\t        } else {\n\t          this.cursor = 'default';\n\t        }\n\t      }\n\t    },\n\t    initCrop: function initCrop() {\n\t      var _this = this;\n\t\n\t      this.ctxCr.clearRect(0, 0, this.canvasW, this.canvasH);\n\t\n\t      this.ctxCr.beginPath();\n\t      this.ctxCr.moveTo(this.img.x, this.img.y);\n\t      this.ctxCr.lineTo(this.img.x + this.img.w, this.img.y);\n\t      this.ctxCr.lineTo(this.img.x + this.img.w, this.img.y + this.img.h);\n\t      this.ctxCr.lineTo(this.img.x, this.img.y + this.img.h);\n\t      this.ctxCr.lineTo(this.img.x, this.img.y);\n\t\n\t      this.ctxCr.moveTo(this.crop.x, this.crop.y);\n\t      this.ctxCr.lineTo(this.crop.x, this.crop.y + this.crop.h);\n\t      this.ctxCr.lineTo(this.crop.x + this.crop.w, this.crop.y + this.crop.h);\n\t      this.ctxCr.lineTo(this.crop.x + this.crop.w, this.crop.y);\n\t      this.ctxCr.lineTo(this.crop.x, this.crop.y);\n\t      this.ctxCr.closePath();\n\t\n\t      this.ctxCr.fillStyle = 'rgba(255,255,255,.5)';\n\t      this.ctxCr.fill();\n\t\n\t      this.ctxCr.strokeStyle = '#e8ecf1';\n\t\n\t      this.ctxCr.beginPath();\n\t      this.ctxCr.rect(this.crop.x, this.crop.y, this.crop.w, this.crop.h);\n\t      this.ctxCr.stroke();\n\t\n\t      this.ctxCr.beginPath();\n\t      this.ctxCr.arc(this.crop.x + this.crop.w + 3, this.crop.y + this.crop.h + 3, 4, 0, 180);\n\t      this.ctxCr.stroke();\n\t\n\t      this.canvasCr.onmousedown = function (e) {\n\t        _this.mouseDown(e);\n\t      };\n\t      this.canvasCr.onmousemove = function (e) {\n\t        _this.mouseMove(e);\n\t      };\n\t      this.canvasCr.onmouseout = function (e) {\n\t        e.preventDefault();\n\t        if (!_this.isMouseDownD && !_this.isMouseDownS) {\n\t          _this.cursor = 'default';\n\t        }\n\t      };\n\t      document.onmouseup = function (e) {\n\t        _this.mouseUp(e);\n\t      };\n\t    },\n\t    outImg: function outImg() {\n\t      var canvasOt = document.querySelector('#canvasOt');\n\t      canvasOt.height = this.crop.h / this.scale;\n\t      canvasOt.width = this.crop.w / this.scale;\n\t      var ctxOt = canvasOt.getContext('2d');\n\t\n\t      ctxOt.drawImage(this.inImg, (this.crop.x - this.img.x) / this.scale, (this.crop.y - this.img.y) / this.scale, this.crop.w / this.scale, this.crop.h / this.scale, 0, 0, this.crop.w / this.scale, this.crop.h / this.scale);\n\t      try {\n\t        return canvasOt.toDataURL();\n\t      } catch (e) {\n\t        console.log('ImgCrop', e);\n\t      }\n\t    }\n\t  },\n\t  ready: function ready() {\n\t    var _this2 = this;\n\t\n\t    this.canvasCr = this.$el.querySelector('#canvasCr');\n\t    this.canvasCr.height = this.canvasH;\n\t    this.canvasCr.width = this.canvasW;\n\t    this.ctxCr = this.canvasCr.getContext('2d');\n\t    var canvasIn = this.$el.querySelector('#canvasIn');\n\t    canvasIn.height = this.canvasH;\n\t    canvasIn.width = this.canvasW;\n\t    var ctxIn = canvasIn.getContext('2d');\n\t    this.bcr = this.canvasCr.getBoundingClientRect();\n\t\n\t    this.img = {\n\t      x: 0,\n\t      y: 0,\n\t      w: this.canvasW,\n\t      h: this.canvasH\n\t    };\n\t    this.crop = {\n\t      x: 100,\n\t      y: 150,\n\t      w: 10,\n\t      h: 70\n\t    };\n\t    this.inImg.src = this.inImgSrc;\n\t    this.inImg.onload = function () {\n\t      _this2.imgJudge();\n\t      ctxIn.drawImage(_this2.inImg, _this2.img.x, _this2.img.y, _this2.img.w, _this2.img.h);\n\t      _this2.initCrop();\n\t    };\n\t  }\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div id=app class=app> <div class=cropPanel> <div class=cropPanel-wrap :class=\\\"{'cropPanel-wrap-ensure': isCroped, 'cropPanel-wrap-redo': !isCroped}\\\"> <img-crop :in-img-src=inImg :canvas-w=360 :canvas-h=260 :is-ratio=true :background-color=bgColor></img-crop> </div> </div> <div class=cropPanel-msg>Photo by &nbsp;あらき のぶよし .</div> <div class=cropPanel-button-wrap @click=crop> <div class=cropPanel-button :class=\\\"{'cropPanel-button-active': isCroped}\\\"> <span>crop<br>redo</span> </div> </div> <div class=cropPanel-auther>zhao</div> </div> \";\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div class=img_crop :style=\\\"{background: backgroundColor}\\\"> <canvas id=canvasIn></canvas> <canvas id=canvasCr :style=\\\"{cursor: cursor}\\\"></canvas> <canvas id=canvasOt></canvas> </div> \";\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(3)\n\t__vue_script__ = __webpack_require__(1)\n\t__vue_template__ = __webpack_require__(5)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(4)\n\t__vue_script__ = __webpack_require__(2)\n\t__vue_template__ = __webpack_require__(6)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** static/js/app.da72bb998b7e227f78d6.js\n **/","import Vue from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: 'body',\n  components: { App }\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","<template>\n  <div id=\"app\" class=\"app\">\n    <div class=\"cropPanel\">   \n      <div class=\"cropPanel-wrap\"\n           :class=\"{'cropPanel-wrap-ensure': isCroped, 'cropPanel-wrap-redo': !isCroped}\">\n        <img-crop :in-img-src=\"inImg\"\n                  :canvas-w=\"360\"\n                  :canvas-h=\"260\"\n                  :is-ratio=\"true\"\n                  :background-color=\"bgColor\"></img-crop>\n      </div>\n    </div>\n    <div class=\"cropPanel-msg\">Photo by &nbsp;あらき のぶよし .</div>\n    <div class=\"cropPanel-button-wrap\"\n       @click=\"crop\">\n      <div class=\"cropPanel-button\"\n            :class=\"{'cropPanel-button-active': isCroped}\">\n        <span>crop<br>redo</span>\n      </div> \n    </div>\n    <div class=\"cropPanel-auther\">zhao</div>\n  </div> \n</template>\n \n<script>\nimport ImgCrop from './components/ImgCrop'\n\nexport default {\n  data () {\n    return {\n      inImg: 'http://works.ccsph.com/uploadfiles/images/20130912/0912120535239613.jpg',\n      otImg: '',\n      bgColor: '#1a1a1a',\n      isCroped: false\n    }\n  },\n  components: {\n    ImgCrop\n  },\n  methods: {\n    crop () {\n      if (!this.isCroped) {\n        this.$broadcast('img:crop')\n      }\n      this.isCroped = !this.isCroped\n    }\n  },\n  events: {\n    'img:out': function (iUri) {\n      this.otImg = iUri\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n@import './assets/css/index.less';\n\n@animationTime: 1s;\n@cropSizeW: 360px;\n@cropSizeH: 260px;\n\n@keyframes cropFrame {\n  0% {\n    height: @cropSizeH;\n  }\n  50% {\n    height: 0;\n  }\n  100% {\n    height: @cropSizeW / 1.6;\n  }\n}\n@keyframes cropFrameR {\n  0% {\n    height: @cropSizeW / 1.6;\n  }\n  50% {\n    height: 0;\n  }\n  100% {\n    height: @cropSizeH;\n  }\n}\n@keyframes cropOpc {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: .1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes cropOpcR {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: .1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\nbody {\n  .re-body;\n  position: relative;\n  height: ~\"calc(100vh - 22px)\";\n  // min-height: 60vw;\n  min-width: 980px;\n  margin: 10px 10px;\n  border: 1px #aacfd0 solid;\n  font-family: 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;\n  color: #1a1a1a;\n  background: #e8ecf1;\n}\n.app {\n  position: relative;\n  height: 500px;\n  top:70px;\n  background: #B5CFD8;\n}\n.cropPanel {\n  position: absolute;\n  top: 220px;\n  left: 0;\n  right: 0;\n  width: @cropSizeW;\n  margin: 0 auto;\n  transform: translate3d(0, -50%, 0);\n  &::before {\n    content: '';\n    position: absolute;\n    top: -40px;\n    width: 100%;\n    height: 40px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    background: #fff;\n  }\n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -80px;\n    width: 100%;\n    height: 80px;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    background: #fff;\n  }\n}\n.cropPanel-wrap {\n  position: relative;\n  height: @cropSizeH;\n  overflow: hidden;\n}\n.img_crop {\n   position: absolute;\n  top: 0;\n  bottom: 0;\n  height: @cropSizeH!important;\n  margin: auto;\n  transition: all @animationTime;\n}\n#canvasOt {\n  display: block!important;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  margin: auto;\n  visibility: hidden;\n  transition: visibility 0s @animationTime / 2;\n}\n.cropPanel-wrap-ensure {\n  animation: cropFrame @animationTime both,\n             cropOpc @animationTime/2 @animationTime/2;\n  #canvasOt {\n    visibility: visible;\n  }\n}\n.cropPanel-wrap-redo {\n  animation: cropFrameR @animationTime both,\n             cropOpcR @animationTime/2 @animationTime/2;\n}\n.cropPanel-msg {\n  position: absolute;\n  top: 60px;\n  left: 50px;\n  font-size: 18px;\n}\n.cropPanel-button-wrap {\n  position: absolute;\n  bottom: -9px;\n  left: 0;\n  right: 0;\n  width: 75px;\n  margin: 0 auto;\n  padding: 9px 0;\n  border: 1px solid rgba(26, 26, 26, .3);\n  text-align: center;\n  cursor: pointer;\n  -webkit-user-select: none;\n  &::before {\n    width: 0;\n    height: 1px;\n    top: -1px;\n    left: -1px;\n  }\n  &::after {\n    width: 1px;\n    height: 0;\n    top: -1px;\n    right: -1px;\n  }\n}\n.cropPanel-button-wrap,\n.cropPanel-button {\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: rgba(26, 26, 26, .6);\n    transition: all .5s;\n  }\n}\n.cropPanel-button-wrap:hover {\n  &,\n  .cropPanel-button {\n    &::before {\n      width: ~\"calc(100% + 2px)\";\n    }\n    &::after {\n      height: ~\"calc(100% + 2px)\";\n    }\n  }\n}\n.cropPanel-button {\n  height: 17px;\n  font-size: 17px;\n  line-height: 1;\n  overflow: hidden;\n  span {\n    display: inline-block;\n    transition: transform .4s 1.1s;\n  }\n  &::before {\n    width: 0;\n    height: 1px;\n    bottom: -1px;\n    right: -1px;\n  }\n  &::after {\n    width: 1px;\n    height: 0;\n    bottom: -1px;\n    left: -1px;\n  }\n}\n.cropPanel-button-active {\n  span {\n    transform: translate3d(0, -17px, 0);\n  }\n}\n.cropPanel-auther {\n  position: absolute;\n  bottom: -36px;\n  right: 35px;\n  font-size: 28px;\n  font-weight: bold;\n  writing-mode: vertical-lr;\n  color: rgba(26, 26, 26, 0.7);\n  cursor: default;\n  -webkit-user-select: none;\n}\n</style>\n\n\n\n/** WEBPACK FOOTER **\n ** App.vue?4e1b3754\n **/","<template>\r\n\t<div class=\"img_crop\"\r\n\t\t\t :style=\"{background: backgroundColor}\">\r\n\t\t<canvas id=\"canvasIn\"></canvas>\r\n\t\t<canvas id=\"canvasCr\"\r\n\t\t\t\t\t\t:style=\"{cursor: cursor}\"></canvas>\r\n\t\t<canvas id=\"canvasOt\"></canvas>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      canvasCr: null,\r\n      ctxCr: null,\r\n      bcr: null,\r\n      img: {},\r\n      crop: {},\r\n      inImg: new window.Image(),\r\n      isMouseDownS: false,\r\n      isMouseDownD: false,\r\n      isMouseOverS: false,\r\n      isMouseOverD: false,\r\n      mouseDragCurX: 0,\r\n      mouseDragCurY: 0,\r\n      scale: 1,\r\n      cursor: ''\r\n    }\r\n  },\r\n  props: {\r\n    canvasW: {\r\n      type: Number,\r\n      default: 360\r\n    },\r\n    canvasH: {\r\n      type: Number,\r\n      default: 360\r\n    },\r\n    inImgSrc: String,\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#000'\r\n    },\r\n    cropInitR: {\r\n      type: Number,\r\n      default: 1.5\r\n    },\r\n    isRatio: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    cropRatio: {\r\n      type: Number,\r\n      default: 1.6\r\n    }\r\n  },\r\n  events: {\r\n    'img:crop': function () {\r\n      let iUri = this.outImg()\r\n      this.$dispatch('img:out', iUri)\r\n    }\r\n  },\r\n  methods: {\r\n    w2cX (x) {\r\n      return x - this.bcr.left\r\n    },\r\n    w2cY (y) {\r\n      return y - this.bcr.top\r\n    },\r\n    // make the image scaled and centered on the canvas\r\n    imgJudge () {\r\n      let imgR = this.inImg.width / this.inImg.height\r\n      let canvasR = this.canvasW / this.canvasH\r\n      if (imgR >= canvasR) {\r\n        this.img.h = this.img.w / imgR\r\n        this.img.y = (this.canvasH - this.img.h) / 2\r\n      } else {\r\n        this.img.w = this.img.h * imgR\r\n        this.img.x = (this.canvasW - this.img.w) / 2\r\n      }\r\n      this.crop.w = this.img.w / this.cropInitR\r\n      this.crop.h = this.crop.w / this.cropRatio\r\n      this.crop.x = this.img.x + this.img.w / 2 - this.crop.w / 2\r\n      this.crop.y = this.img.y + this.img.h / 2 - this.crop.h / 2\r\n      this.scale = this.img.h / this.inImg.height\r\n    },\r\n    mouseDown (e) {\r\n      e.preventDefault()\r\n      if (this.isMouseOverD) {\r\n        this.isMouseDownD = true\r\n        this.mouseDragCurX = this.w2cX(e.clientX)\r\n        this.mouseDragCurY = this.w2cX(e.clientY)\r\n      } else if (this.isMouseOverS) {\r\n        this.isMouseDownS = true\r\n      }\r\n    },\r\n    mouseMove (e) {\r\n      e.preventDefault()\r\n      if (!this.isMouseDownD && !this.isMouseDownS) {\r\n        let isDrag = this.w2cX(e.clientX) <= this.crop.x + this.crop.w && this.w2cX(e.clientX) >= this.crop.x && this.w2cY(e.clientY) <= this.crop.y + this.crop.h && this.w2cY(e.clientY) >= this.crop.y\r\n        if (isDrag) {\r\n          this.cursor = 'move'\r\n          this.isMouseOverD = true\r\n        } else if (this.ctxCr.isPointInPath(this.w2cX(e.clientX), this.w2cY(e.clientY))) {\r\n          this.cursor = 'nwse-resize'\r\n          this.isMouseOverS = true\r\n        } else {\r\n          this.cursor = 'default'\r\n          this.isMouseOverD = false\r\n          this.isMouseOverS = false\r\n        }\r\n      }\r\n      if (this.isMouseDownD) {\r\n        let mouseDX = this.w2cX(e.clientX) - this.mouseDragCurX\r\n        let mouseDY = this.w2cX(e.clientY) - this.mouseDragCurY\r\n        let isBeyound = (this.crop.x + mouseDX) < this.img.x || (this.crop.y + mouseDY) < this.img.y || (this.crop.x + mouseDX + this.crop.w) > (this.img.x + this.img.w) || (this.crop.y + mouseDY + this.crop.h) > (this.img.y + this.img.h)\r\n        if (!isBeyound) {\r\n          this.mouseDragCurX = this.w2cX(e.clientX)\r\n          this.mouseDragCurY = this.w2cX(e.clientY)\r\n          this.crop.x = this.crop.x + mouseDX\r\n          this.crop.y = this.crop.y + mouseDY\r\n          this.initCrop()\r\n        }\r\n      } else if (this.isMouseDownS) {\r\n        let curR = (this.w2cX(e.clientX) - this.crop.x) / (this.w2cY(e.clientY) - this.crop.y)\r\n        let isBeyound\r\n        if (!this.isRatio) {\r\n          isBeyound = this.w2cX(e.clientX) < this.crop.x || this.w2cX(e.clientX) > (this.img.x + this.img.w) || this.w2cY(e.clientY) < this.crop.y || this.w2cY(e.clientY) > (this.img.y + this.img.h)\r\n          if (!isBeyound) {\r\n            this.crop.w = this.w2cX(e.clientX) - this.crop.x\r\n            this.crop.h = this.w2cY(e.clientY) - this.crop.y\r\n            this.initCrop()\r\n          }\r\n        } else {\r\n          if (curR >= this.cropRatio) {\r\n            isBeyound = (this.crop.x + (this.w2cY(e.clientY) - this.crop.y) * this.cropRatio) < this.crop.x || (this.crop.x + (this.w2cY(e.clientY) - this.crop.y) * this.cropRatio) > (this.img.x + this.img.w) || this.w2cY(e.clientY) < this.crop.y || this.w2cY(e.clientY) > (this.img.y + this.img.h)\r\n            if (!isBeyound) {\r\n              this.crop.h = this.w2cY(e.clientY) - this.crop.y\r\n              this.crop.w = this.crop.h * this.cropRatio\r\n              this.initCrop()\r\n            }\r\n          } else {\r\n            isBeyound = this.w2cX(e.clientX) < this.crop.x || this.w2cX(e.clientX) > (this.img.x + this.img.w) || this.crop.y + (this.w2cX(e.clientX) - this.crop.x) / this.cropRatio < this.crop.y || this.crop.y + (this.w2cX(e.clientX) - this.crop.x) / this.cropRatio > (this.img.y + this.img.h)\r\n            if (!isBeyound) {\r\n              this.crop.w = this.w2cX(e.clientX) - this.crop.x\r\n              this.crop.h = this.crop.w / this.cropRatio\r\n              this.initCrop()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    mouseUp (e) {\r\n      e.preventDefault()\r\n      if (this.isMouseDownD) {\r\n        this.isMouseDownD = false\r\n      } else if (this.isMouseDownS) {\r\n        this.isMouseDownS = false\r\n      }\r\n    },\r\n    mouseOver (e) {\r\n      e.preventDefault()\r\n      let isDrag = this.w2cX(e.clientX) <= this.crop.x + this.crop.w && this.w2cX(e.clientX) >= this.crop.x && this.w2cY(e.clientY) <= this.crop.y + this.crop.h && this.w2cY(e.clientY) >= this.crop.y\r\n      if (isDrag) {\r\n        this.cursor = 'move'\r\n      } else {\r\n        if (this.ctxCr.isPointInPath(this.w2cX(e.clientX), this.w2cY(e.clientY))) {\r\n          this.cursor = 'nwse-resize'\r\n        } else {\r\n          this.cursor = 'default'\r\n        }\r\n      }\r\n    },\r\n    initCrop () {\r\n      this.ctxCr.clearRect(0, 0, this.canvasW, this.canvasH)\r\n      // mask layer\r\n      this.ctxCr.beginPath()\r\n      this.ctxCr.moveTo(this.img.x, this.img.y)\r\n      this.ctxCr.lineTo(this.img.x + this.img.w, this.img.y)\r\n      this.ctxCr.lineTo(this.img.x + this.img.w, this.img.y + this.img.h)\r\n      this.ctxCr.lineTo(this.img.x, this.img.y + this.img.h)\r\n      this.ctxCr.lineTo(this.img.x, this.img.y)\r\n      //\r\n      this.ctxCr.moveTo(this.crop.x, this.crop.y)\r\n      this.ctxCr.lineTo(this.crop.x, this.crop.y + this.crop.h)\r\n      this.ctxCr.lineTo(this.crop.x + this.crop.w, this.crop.y + this.crop.h)\r\n      this.ctxCr.lineTo(this.crop.x + this.crop.w, this.crop.y)\r\n      this.ctxCr.lineTo(this.crop.x, this.crop.y)\r\n      this.ctxCr.closePath()\r\n      // fill mask layer\r\n      this.ctxCr.fillStyle = 'rgba(255,255,255,.5)'\r\n      this.ctxCr.fill()\r\n      //\r\n      this.ctxCr.strokeStyle = '#e8ecf1'\r\n      // drag area\r\n      this.ctxCr.beginPath()\r\n      this.ctxCr.rect(this.crop.x, this.crop.y, this.crop.w, this.crop.h)\r\n      this.ctxCr.stroke()\r\n      // scale area\r\n      this.ctxCr.beginPath()\r\n      this.ctxCr.arc(this.crop.x + this.crop.w + 3, this.crop.y + this.crop.h + 3, 4, 0, 180)\r\n      this.ctxCr.stroke()\r\n      //\r\n      this.canvasCr.onmousedown = (e) => {\r\n        this.mouseDown(e)\r\n      }\r\n      this.canvasCr.onmousemove = (e) => {\r\n        this.mouseMove(e)\r\n      }\r\n      this.canvasCr.onmouseout = (e) => {\r\n        e.preventDefault()\r\n        if (!this.isMouseDownD && !this.isMouseDownS) {\r\n          this.cursor = 'default'\r\n        }\r\n      }\r\n      document.onmouseup = (e) => {\r\n        this.mouseUp(e)\r\n      }\r\n    },\r\n    outImg () {\r\n      let canvasOt = document.querySelector('#canvasOt')\r\n      canvasOt.height = this.crop.h / this.scale\r\n      canvasOt.width = this.crop.w / this.scale\r\n      let ctxOt = canvasOt.getContext('2d')\r\n      // 将原尺寸图片按裁剪区域绘制在canvasOt上\r\n      ctxOt.drawImage(this.inImg, (this.crop.x - this.img.x) / this.scale, (this.crop.y - this.img.y) / this.scale, this.crop.w / this.scale, this.crop.h / this.scale, 0, 0, this.crop.w / this.scale, this.crop.h / this.scale)\r\n      try {\r\n        return canvasOt.toDataURL()\r\n      } catch (e) {\r\n        console.log('ImgCrop', e)\r\n      }\r\n    }\r\n  },\r\n  ready () {\r\n    // init canvas\r\n    this.canvasCr = this.$el.querySelector('#canvasCr')\r\n    this.canvasCr.height = this.canvasH\r\n    this.canvasCr.width = this.canvasW\r\n    this.ctxCr = this.canvasCr.getContext('2d')\r\n    let canvasIn = this.$el.querySelector('#canvasIn')\r\n    canvasIn.height = this.canvasH\r\n    canvasIn.width = this.canvasW\r\n    let ctxIn = canvasIn.getContext('2d')\r\n    this.bcr = this.canvasCr.getBoundingClientRect()\r\n    // init data for rendering\r\n    this.img = {\r\n      x: 0,\r\n      y: 0,\r\n      w: this.canvasW,\r\n      h: this.canvasH\r\n    }\r\n    this.crop = {\r\n      x: 100,\r\n      y: 150,\r\n      w: 10,\r\n      h: 70\r\n    }\r\n    this.inImg.src = this.inImgSrc\r\n    this.inImg.onload = () => {\r\n      this.imgJudge()\r\n      ctxIn.drawImage(this.inImg, this.img.x, this.img.y, this.img.w, this.img.h)\r\n      this.initCrop()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\t.img_crop {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t.img_crop canvas {\r\n    position: absolute;\r\n  }\r\n  #canvasOt {\r\n  \tdisplay: none;\r\n  }\r\n</style>\n\n\n/** WEBPACK FOOTER **\n ** ImgCrop.vue?592386da\n **/","module.exports = \" <div id=app class=app> <div class=cropPanel> <div class=cropPanel-wrap :class=\\\"{'cropPanel-wrap-ensure': isCroped, 'cropPanel-wrap-redo': !isCroped}\\\"> <img-crop :in-img-src=inImg :canvas-w=360 :canvas-h=260 :is-ratio=true :background-color=bgColor></img-crop> </div> </div> <div class=cropPanel-msg>Photo by &nbsp;あらき のぶよし .</div> <div class=cropPanel-button-wrap @click=crop> <div class=cropPanel-button :class=\\\"{'cropPanel-button-active': isCroped}\\\"> <span>crop<br>redo</span> </div> </div> <div class=cropPanel-auther>zhao</div> </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n ** module id = 5\n ** module chunks = 1\n **/","module.exports = \" <div class=img_crop :style=\\\"{background: backgroundColor}\\\"> <canvas id=canvasIn></canvas> <canvas id=canvasCr :style=\\\"{cursor: cursor}\\\"></canvas> <canvas id=canvasOt></canvas> </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ImgCrop.vue\n ** module id = 6\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../node_modules/vue-loader/lib/style-rewriter.js!less-loader?sourceMap!./../node_modules/vue-loader/lib/selector.js?type=style&index=0!./App.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../node_modules/vue-loader/lib/selector.js?type=script&index=0!./App.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../node_modules/vue-loader/lib/selector.js?type=template&index=0!./App.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/App.vue\n ** module id = 7\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./ImgCrop.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./ImgCrop.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./ImgCrop.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/ImgCrop.vue\n ** module id = 8\n ** module chunks = 1\n **/"],"sourceRoot":""}